{"version":3,"sources":["Validation.js","Fields.js","DOM.js","jquery-extend-valbundy.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"valbundy.js","sourcesContent":["/**\r\n * Created by Kristo on 17.03.2015.\r\n */\r\n\r\nvar Valbundy = Valbundy || {};\r\n\r\nValbundy.Validation = function() {\r\n\r\n    var v = this;\r\n    v.value = '';\r\n    v.pass = true;\r\n\r\n    v.validate = function(target)\r\n    {\r\n        var data_rules = target.attr('data-rules') || target.parent().attr('data-rules');\r\n        var rules = [];\r\n\r\n        if(typeof data_rules !== 'undefined' && data_rules.length >= 1)\r\n        {\r\n            rules = data_rules.split(\"|\");\r\n            v.value = $.trim(target.val());\r\n\r\n            $.each(rules, function( key, method )\r\n            {\r\n                if (method in v)\r\n                {\r\n                    v[method]();\r\n                    if (!v.pass)\r\n                    {\r\n                        return false;\r\n                    }\r\n                }\r\n                else\r\n                {\r\n                    console.log('Validation rule does not exist.')\r\n                }\r\n            });\r\n        }\r\n        return v.pass;\r\n    };\r\n\r\n    v.required = function()\r\n    {\r\n        v.pass = v.value.length;\r\n    };\r\n\r\n    v.alpha = function()\r\n    {\r\n        var re = /^[a-zA-ZäöüÄÖÜàáâçéèêëîïôûùüÿñæœß]*$/;\r\n        v.pass = re.exec(v.value);\r\n    };\r\n\r\n    // german name\r\n    v.name = function()\r\n    {\r\n        var re = /^[a-zA-ZäöüÄÖÜàáâçéèêëîïôûùüÿñæœß\\-]*$/;\r\n        v.pass = re.exec(v.value);\r\n    };\r\n\r\n    v.min = function()\r\n    {\r\n        v.pass = v.value.length;\r\n    };\r\n\r\n    v.phone = function()\r\n    {\r\n        var re = /^((\\+){0,2}[0-9 \\-\\/]{8,20})*$/;\r\n        v.pass = re.exec(v.value);\r\n    };\r\n\r\n    v.email = function()\r\n    {\r\n        var re = /^([-0-9a-zA-Z.+_]{1,60}@[-0-9a-zA-Z.+_]{1,60}\\.[a-zA-Z]{2,4})*$/;\r\n        v.pass = re.exec(v.value);\r\n    };\r\n\r\n    v.int = function()\r\n    {\r\n        var re = /^([0-9])*$/;\r\n        v.pass = re.exec(v.value);\r\n    };\r\n\r\n    v.alphanumeric = function()\r\n    {\r\n        var re = /^([a-zA-Z0-9 ])*$/;\r\n        v.pass = re.exec(v.value);\r\n    };\r\n\r\n    // german cities\r\n    v.city = function()\r\n    {\r\n        var re = /^(([a-zA-Z-äöüÄÖÜß/\\(\\)]+\\s){0,100}[a-zA-Z-äöüÄÖÜß/\\(\\)]{2,100})*$/;\r\n        v.pass = re.exec(v.value);\r\n    };\r\n\r\n    // german zip\r\n    v.zip = function()\r\n    {\r\n        var re = /^(([0]{1}[1-9]{1}|[1-9]{1}[0-9]{1})[0-9]{3})*$/;\r\n        v.pass = re.exec(v.value);\r\n    };\r\n\r\n    // e. g. 2x1\r\n    v.xy = function()\r\n    {\r\n        var re = /^([2-6]x1)*$/;\r\n        v.pass = re.exec(v.value);\r\n    };\r\n\r\n    // german text restricted to 1000 characters\r\n    v.text = function()\r\n    {\r\n        var re = /^([a-zA-Z0-9, !?.\"%§&:;äöüÄÖÜß()$€=\\-\\+\\r\\n]){0,1000}$/;\r\n        v.pass = re.exec(v.value);\r\n    };\r\n\r\n    // german line restricted to 140 characters\r\n    v.line = function()\r\n    {\r\n        var re = /^([a-zA-Z0-9, !?.\"%§&:;äöüÄÖÜß()$€=\\-\\+]){0,140}$/;\r\n        v.pass = re.exec(v.value);\r\n    };\r\n\r\n    // german street\r\n    v.street = function()\r\n    {\r\n        var re = /^([A-Za-z 0-9-.,&äöüÄÖÜß]{2,100})*$/;\r\n        v.pass = re.exec(v.value);\r\n    };\r\n\r\n};\r\n","/**\r\n * Created by Kristo on 17.03.2015.\r\n */\r\n\r\nValbundy.Fields = function(form) {\r\n\r\n    var f = this;\r\n    f.form = form;\r\n    f.fields = {};\r\n    f.fieldcount = 0;\r\n    f.validatedFields = {};\r\n\r\n    f.setFields = function()\r\n    {\r\n        f.fields = $(f.form.selector + ' :input[data-rules]');\r\n        return f;\r\n    };\r\n\r\n    f.countFields = function()\r\n    {\r\n        f.fieldcount = f.fields.length;\r\n        return f;\r\n    };\r\n\r\n    f.addValidatedField = function(field)\r\n    {\r\n        f.validatedFields[field.attr('name')] = 'validated';\r\n        return f;\r\n    };\r\n\r\n    f.deleteValidatedField = function(field)\r\n    {\r\n        delete f.validatedFields[field.attr('name')];\r\n        return f;\r\n    };\r\n\r\n    f.countValidatedFields = function()\r\n    {\r\n        var count = 0;\r\n        var i;\r\n\r\n        for (i in f.validatedFields)\r\n        {\r\n            if (f.validatedFields.hasOwnProperty(i))\r\n            {\r\n                count++;\r\n            }\r\n        }\r\n        return count;\r\n    };\r\n\r\n    f.status = function(dom)\r\n    {\r\n        /**\r\n         * Check if all fields are validated.\r\n         * If so we enable the submit-button.\r\n         */\r\n        if(f.countValidatedFields() == f.fieldcount)\r\n        {\r\n            dom.enableSubmit();\r\n        }\r\n        else\r\n        {\r\n            dom.disableSubmit();\r\n        }\r\n    };\r\n\r\n};\r\n","/**\r\n * Created by Kristo on 17.03.2015.\r\n */\r\n\r\nValbundy.DOM = function(form) {\r\n\r\n    var d = this;\r\n    d.submit = $(form.selector + ' :submit');\r\n    d.successImage = '<img class=\"valbundy-success\" src=\"/img/valbundy-success.png\" alt=\"check\">';\r\n    d.errorImage = '<img class=\"valbundy-error\" src=\"/img/valbundy-error.png\" alt=\"x\">';\r\n\r\n    d.disableSubmit = function()\r\n    {\r\n        d.submit.prop('disabled', true).addClass('disabled');\r\n        return d;\r\n    };\r\n\r\n    d.enableSubmit = function()\r\n    {\r\n        d.submit.prop('disabled', false).removeClass('disabled');\r\n        return d;\r\n    };\r\n\r\n    d.addClass = function(target, c)\r\n    {\r\n        target.addClass(c);\r\n        return d;\r\n    };\r\n\r\n    d.removeClass = function(target, c)\r\n    {\r\n        target.removeClass(c);\r\n        return d;\r\n    };\r\n\r\n    d.showSuccessImage = function(target)\r\n    {\r\n        var next = target.next().attr('class');\r\n        if(next !== 'valbundy-success')\r\n        {\r\n            target.after(d.successImage);\r\n\r\n        }\r\n        return d;\r\n    };\r\n\r\n    d.hideSuccessImage = function(target)\r\n    {\r\n        target.next('.valbundy-success').remove();\r\n        return d;\r\n    };\r\n\r\n    d.showErrorImage = function(target)\r\n    {\r\n        var next = target.next().attr('class');\r\n        if(next !== 'valbundy-error')\r\n        {\r\n            target.after(d.errorImage);\r\n\r\n        }\r\n        return d;\r\n    };\r\n\r\n    d.hideErrorImage = function(target)\r\n    {\r\n        target.next('.valbundy-error').remove();\r\n        return d;\r\n    };\r\n};\r\n","/**\r\n * Created by Kristo on 16.03.2015.\r\n */\r\n\r\njQuery.fn.extend({\r\n    valbundy: function() {\r\n\r\n        var form = $(this);\r\n\r\n        var validation = new Valbundy.Validation();\r\n        var dom =        new Valbundy.DOM(form);\r\n        var fields =     new Valbundy.Fields(form);\r\n\r\n        fields.setFields().countFields();\r\n\r\n        /**\r\n         * Disable submit button\r\n         * if at least 1 field exists with\r\n         * data-rules attribute\r\n         */\r\n        if(fields.fieldcount)\r\n        {\r\n            dom.disableSubmit();\r\n        }\r\n\r\n        dom.submit.on('click', function()\r\n        {\r\n            dom.disableSubmit(); // @todo not just disabling: also loading-feedback\r\n            form.submit();\r\n        });\r\n\r\n        /**\r\n         * Init: Validate input-fields\r\n         * Check if server-flag \"data-error\" is set to 1\r\n         * If so: Delete those fields from ValidatedFields-Object\r\n         */\r\n        $.each(fields.fields, function(key, obj)\r\n        {\r\n            var field = $(this);\r\n            if(validation.validate(field))\r\n            {\r\n                fields.addValidatedField(field);\r\n            }\r\n            else\r\n            {\r\n                fields.deleteValidatedField(field);\r\n            }\r\n            if(parseInt(field.attr('data-error')))\r\n            {\r\n                dom.addClass(field, 'error').showErrorImage(field);\r\n                fields.deleteValidatedField(field);\r\n            }\r\n\r\n            fields.status(dom);\r\n\r\n        });\r\n\r\n        fields.fields.on('propertychange change click keyup paste', function() {\r\n\r\n            var field = $(this);\r\n            var label = $('label[for=\"' + field.attr('id') + '\"]');\r\n\r\n            /**\r\n             * Check if validation for input passes but only if content is given\r\n             */\r\n            if(validation.validate(field))\r\n            {\r\n                dom.removeClass(field, 'error').hideErrorImage(field).showSuccessImage(field);\r\n                fields.addValidatedField(field);\r\n            }\r\n            else\r\n            {\r\n                dom.addClass(field, 'error').hideSuccessImage(field).showErrorImage(field);\r\n                fields.deleteValidatedField(field);\r\n            }\r\n\r\n            fields.status(dom);\r\n\r\n        });\r\n\r\n    }\r\n});\r\n"],"sourceRoot":"/source/"}