var Valbundy=Valbundy||{};Valbundy.Validation=function(){var e=this;e.value="",e.pass=!0,e.validate=function(a){var t=a.attr("data-rules")||a.parent().attr("data-rules"),s=[];return"undefined"!=typeof t&&t.length>=1&&(s=t.split("|"),e.value=$.trim(a.val()),$.each(s,function(a,t){if(t in e){if(e[t](),!e.pass)return!1}else console.log("Validation rule does not exist.")})),e.pass},e.required=function(){e.pass=e.value.length},e.alpha=function(){var a=/^[a-zA-ZäöüÄÖÜàáâçéèêëîïôûùüÿñæœß]*$/;e.pass=a.exec(e.value)},e.min=function(){e.pass=e.value.length},e.phone=function(){var a=/^((\+){0,2}[0-9 ]{8,20})*$/;e.pass=a.exec(e.value)},e.email=function(){var a=/^([-0-9a-zA-Z.+_]{1,60}@[-0-9a-zA-Z.+_]{1,60}\.[a-zA-Z]{2,4})*$/;e.pass=a.exec(e.value)},e.city=function(){var a=/^(([a-zA-Z-äöüÄÖÜß/\(\)]+\s){0,100}[a-zA-Z-äöüÄÖÜß/\(\)]{2,100})*$/;e.pass=a.exec(e.value)},e.zip=function(){var a=/^(([0]{1}[1-9]{1}|[1-9]{1}[0-9]{1})[0-9]{3})*$/;e.pass=a.exec(e.value)}},Valbundy.Fields=function(e){var a=this;a.form=e,a.fields={},a.fieldcount=0,a.validatedFields={},a.setFields=function(){return a.fields=$(a.form.selector+" :input[data-rules]"),a},a.countFields=function(){return a.fieldcount=a.fields.length,a},a.addValidatedField=function(e){return a.validatedFields[e.attr("name")]="validated",a},a.deleteValidatedField=function(e){return delete a.validatedFields[e.attr("name")],a},a.countValidatedFields=function(){var e,t=0;for(e in a.validatedFields)a.validatedFields.hasOwnProperty(e)&&t++;return t},a.status=function(e){a.countValidatedFields()==a.fieldcount?e.enableSubmit():e.disableSubmit()}},Valbundy.DOM=function(e){var a=this;a.submit=$(e.selector+" :submit"),a.successImage='<img class="valbundy-success" src="/img/valbundy-success.png" alt="check">',a.errorImage='<img class="valbundy-error" src="/img/valbundy-error.png" alt="x">',a.disableSubmit=function(){return a.submit.prop("disabled",!0).addClass("disabled"),a},a.enableSubmit=function(){return a.submit.prop("disabled",!1).removeClass("disabled"),a},a.addClass=function(e,t){return e.addClass(t),a},a.removeClass=function(e,t){return e.removeClass(t),a},a.showSuccessImage=function(e){var t=e.next().attr("class");return"valbundy-success"!==t&&e.after(a.successImage),a},a.hideSuccessImage=function(e){return e.next(".valbundy-success").remove(),a},a.showErrorImage=function(e){var t=e.next().attr("class");return"valbundy-error"!==t&&e.after(a.errorImage),a},a.hideErrorImage=function(e){return e.next(".valbundy-error").remove(),a}},jQuery.fn.extend({valbundy:function(){var e=$(this),a=new Valbundy.Validation,t=new Valbundy.DOM(e),s=new Valbundy.Fields(e);s.setFields().countFields(),s.fieldcount&&t.disableSubmit(),t.submit.on("click",function(){t.disableSubmit(),e.submit()}),$.each(s.fields,function(){var e=$(this);a.validate(e)?s.addValidatedField(e):s.deleteValidatedField(e),parseInt(e.attr("data-error"))&&(t.addClass(e,"error").showErrorImage(e),s.deleteValidatedField(e)),s.status(t)}),s.fields.on("propertychange change click keyup paste",function(){var e=$(this);a.validate(e)?(t.removeClass(e,"error").hideErrorImage(e).showSuccessImage(e),s.addValidatedField(e)):(t.addClass(e,"error").hideSuccessImage(e).showErrorImage(e),s.deleteValidatedField(e)),s.status(t)})}});