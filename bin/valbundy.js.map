{"version":3,"sources":["Validation.js","Fields.js","DOM.js","jquery-extend-valbundy.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC5HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"valbundy.js","sourcesContent":["/**\n * Created by Kristo on 17.03.2015.\n */\n\nvar Valbundy = Valbundy || {};\n\nValbundy.Validation = function() {\n\n    var v = this;\n    v.value = '';\n    v.pass = true;\n\n    v.validate = function(target)\n    {\n        var data_rules = target.attr('data-rules') || target.parent().attr('data-rules');\n        var rules = [];\n\n        if(typeof data_rules !== 'undefined' && data_rules.length >= 1)\n        {\n            rules = data_rules.split(\"|\");\n            v.value = $.trim(target.val());\n\n            $.each(rules, function( key, method )\n            {\n                if (method in v)\n                {\n                    v[method]();\n                    if (!v.pass)\n                    {\n                        return false;\n                    }\n                }\n                else\n                {\n                    console.log('Validation rule does not exist.')\n                }\n            });\n        }\n        return v.pass;\n    };\n\n    v.required = function()\n    {\n        v.pass = v.value.length;\n    };\n\n    v.alpha = function()\n    {\n        var re = /^[a-zA-ZäöüÄÖÜàáâçéèêëîïôûùüÿñæœß]*$/;\n        v.pass = re.exec(v.value);\n    };\n\n    v.min = function()\n    {\n        v.pass = v.value.length;\n    };\n\n    v.phone = function()\n    {\n        var re = /^((\\+){0,2}[0-9 \\-\\/]{8,20})*$/;\n        v.pass = re.exec(v.value);\n    };\n\n    v.email = function()\n    {\n        var re = /^([-0-9a-zA-Z.+_]{1,60}@[-0-9a-zA-Z.+_]{1,60}\\.[a-zA-Z]{2,4})*$/;\n        v.pass = re.exec(v.value);\n    };\n\n    v.int = function()\n    {\n        var re = /^([0-9])*$/;\n        v.pass = re.exec(v.value);\n    };\n\n    v.alphanumeric = function()\n    {\n        var re = /^([a-zA-Z0-9 ])*$/;\n        v.pass = re.exec(v.value);\n    };\n\n    // german cities\n    v.city = function()\n    {\n        var re = /^(([a-zA-Z-äöüÄÖÜß/\\(\\)]+\\s){0,100}[a-zA-Z-äöüÄÖÜß/\\(\\)]{2,100})*$/;\n        v.pass = re.exec(v.value);\n    };\n\n    // german zip\n    v.zip = function()\n    {\n        var re = /^(([0]{1}[1-9]{1}|[1-9]{1}[0-9]{1})[0-9]{3})*$/;\n        v.pass = re.exec(v.value);\n    };\n\n    // e. g. 2x1\n    v.xy = function()\n    {\n        var re = /^([2-6]x1)*$/;\n        v.pass = re.exec(v.value);\n    };\n\n    // german text restricted to 1000 characters\n    v.text = function()\n    {\n        var re = /^([a-zA-Z0-9, !?.\"%§&:;äöüÄÖÜß()$€=\\-\\+\\r\\n]){0,1000}$/;\n        v.pass = re.exec(v.value);\n    };\n\n    // german line restricted to 140 characters\n    v.line = function()\n    {\n        var re = /^([a-zA-Z0-9, !?.\"%§&:;äöüÄÖÜß()$€=\\-\\+]){0,140}$/;\n        v.pass = re.exec(v.value);\n    };\n\n    // german street\n    v.street = function()\n    {\n        var re = /^([A-Za-z 0-9-.,&äöüÄÖÜß]{2,100})*$/;\n        v.pass = re.exec(v.value);\n    };\n\n};\n","/**\n * Created by Kristo on 17.03.2015.\n */\n\nValbundy.Fields = function(form) {\n\n    var f = this;\n    f.form = form;\n    f.fields = {};\n    f.fieldcount = 0;\n    f.validatedFields = {};\n\n    f.setFields = function()\n    {\n        f.fields = $(f.form.selector + ' :input[data-rules]');\n        return f;\n    };\n\n    f.countFields = function()\n    {\n        f.fieldcount = f.fields.length;\n        return f;\n    };\n\n    f.addValidatedField = function(field)\n    {\n        f.validatedFields[field.attr('name')] = 'validated';\n        return f;\n    };\n\n    f.deleteValidatedField = function(field)\n    {\n        delete f.validatedFields[field.attr('name')];\n        return f;\n    };\n\n    f.countValidatedFields = function()\n    {\n        var count = 0;\n        var i;\n\n        for (i in f.validatedFields)\n        {\n            if (f.validatedFields.hasOwnProperty(i))\n            {\n                count++;\n            }\n        }\n        return count;\n    };\n\n    f.status = function(dom)\n    {\n        /**\n         * Check if all fields are validated.\n         * If so we enable the submit-button.\n         */\n        if(f.countValidatedFields() == f.fieldcount)\n        {\n            dom.enableSubmit();\n        }\n        else\n        {\n            dom.disableSubmit();\n        }\n    };\n\n};\n","/**\n * Created by Kristo on 17.03.2015.\n */\n\nValbundy.DOM = function(form) {\n\n    var d = this;\n    d.submit = $(form.selector + ' :submit');\n    d.successImage = '<img class=\"valbundy-success\" src=\"/img/valbundy-success.png\" alt=\"check\">';\n    d.errorImage = '<img class=\"valbundy-error\" src=\"/img/valbundy-error.png\" alt=\"x\">';\n\n    d.disableSubmit = function()\n    {\n        d.submit.prop('disabled', true).addClass('disabled');\n        return d;\n    };\n\n    d.enableSubmit = function()\n    {\n        d.submit.prop('disabled', false).removeClass('disabled');\n        return d;\n    };\n\n    d.addClass = function(target, c)\n    {\n        target.addClass(c);\n        return d;\n    };\n\n    d.removeClass = function(target, c)\n    {\n        target.removeClass(c);\n        return d;\n    };\n\n    d.showSuccessImage = function(target)\n    {\n        var next = target.next().attr('class');\n        if(next !== 'valbundy-success')\n        {\n            target.after(d.successImage);\n\n        }\n        return d;\n    };\n\n    d.hideSuccessImage = function(target)\n    {\n        target.next('.valbundy-success').remove();\n        return d;\n    };\n\n    d.showErrorImage = function(target)\n    {\n        var next = target.next().attr('class');\n        if(next !== 'valbundy-error')\n        {\n            target.after(d.errorImage);\n\n        }\n        return d;\n    };\n\n    d.hideErrorImage = function(target)\n    {\n        target.next('.valbundy-error').remove();\n        return d;\n    };\n};\n","/**\n * Created by Kristo on 16.03.2015.\n */\n\njQuery.fn.extend({\n    valbundy: function() {\n\n        var form = $(this);\n\n        var validation = new Valbundy.Validation();\n        var dom =        new Valbundy.DOM(form);\n        var fields =     new Valbundy.Fields(form);\n\n        fields.setFields().countFields();\n\n        /**\n         * Disable submit button\n         * if at least 1 field exists with\n         * data-rules attribute\n         */\n        if(fields.fieldcount)\n        {\n            dom.disableSubmit();\n        }\n\n        dom.submit.on('click', function()\n        {\n            dom.disableSubmit(); // @todo not just disabling: also loading-feedback\n            form.submit();\n        });\n\n        /**\n         * Init: Validate input-fields\n         * Check if server-flag \"data-error\" is set to 1\n         * If so: Delete those fields from ValidatedFields-Object\n         */\n        $.each(fields.fields, function(key, obj)\n        {\n            var field = $(this);\n            if(validation.validate(field))\n            {\n                fields.addValidatedField(field);\n            }\n            else\n            {\n                fields.deleteValidatedField(field);\n            }\n            if(parseInt(field.attr('data-error')))\n            {\n                dom.addClass(field, 'error').showErrorImage(field);\n                fields.deleteValidatedField(field);\n            }\n\n            fields.status(dom);\n\n        });\n\n        fields.fields.on('propertychange change click keyup paste', function() {\n\n            var field = $(this);\n            var label = $('label[for=\"' + field.attr('id') + '\"]');\n\n            /**\n             * Check if validation for input passes but only if content is given\n             */\n            if($.trim(field.val()).length >= 1)\n            {\n                if(validation.validate(field))\n                {\n                    dom.removeClass(field, 'error').hideErrorImage(label).showSuccessImage(label);\n                    fields.addValidatedField(field);\n                }\n                else\n                {\n                    dom.addClass(field, 'error').hideSuccessImage(label).showErrorImage(label);\n                    fields.deleteValidatedField(field);\n                }\n\n            }\n            else\n            {\n                dom.hideSuccessImage(label);\n                fields.deleteValidatedField(field);\n            }\n\n            fields.status(dom);\n\n        });\n\n    }\n});\n"],"sourceRoot":"/source/"}